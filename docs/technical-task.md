# 1. Цель проекта
Цель проекта - создать универсальный html5 видеоплеер для web-сайта (далее плеер). С возможностью запуска заранее записанных видео и прямых эфиров.
С поддержкой:
* Воспроизведения видео с разным качеством и скоростью.
* Запуска разных видео и аудио дорожек.
* Отображения субтитров на разных языках.
* Создания скриншотов.
* Вырезки коротких видео.
* Плейлистов.
* Статистики работы плеера.
* Режим картинка в картинке.
* Полноэкранный режим.
* Получения ссылки на скачивания.
* DRM.
* Управление горячими клавишами.

# 2. Описание плеера
Плеер состоит из следующих функциональных блоков:
1. Просмотр заранее записанных видео.
2. Просмотр прямых эфиров.
3. Отображение субтитров.
4. Режим создания скриншотов.
5. Режим вырезки коротких видео.
6. Плейлисты.
7. Статистика.
8. Сохрание заранее записанных видео.
9. Управление горячими клавишами.

Плеер многоязычный. Язык должен зависить от выбранного в браузере или задан пользователем или разработчиком.

## 2.1 Просмотр заранее записанных видео.
Плеер должен иметь возможность показа видео в масимально возможном качестве, которое позволяет интернет соединение ползователя. Разрешать менять его на любое из доступных. Выбирать видео и аудео дорожки. Устанавливать уровонь воспроизводимого звука. Выбирать момент в видео с помощью временной шкалы. Менять режимы просмотра: обычный, полноэкранный, картинка в картинке. Выбирать скорость воспроизведения.

## 2.2 Просмотр прямых эфиров.
Плеер должен иметь возможность показа прямых эфиров в масимально возможном качестве, которое позволяет интернет соединение ползователя. Разрешать менять его на любое из доступных. Выбирать видео и аудео дорожки. Устанавливать уровонь воспроизводимого звука. Выбирать момент из уже прошедшей части трансляции с помощью временной шкалы. Менять режимы просмотра: обычный, полноэкранный, картинка в картинке. 

## 2.3 Отображение субтитров.

## 2.4 Режим создания скриншотов.
Плеер должен иметь возможность создания скриншотов текущего кадра видео. В названии файла должно быть указано название видео и таймкод.

## 2.5 Режим вырезки коротких видео.
Плеер должен иметь возможность создания вырезки из основного видео. В названии файла должно быть указано название видео, таймкод начала и таймкод конца.

## 2.6 Плейлисты.
Плеер должен иметь возможность загружать видео из плейлиста. Иметь возможность выбора между ними. Осуществять навигацию.

## 2.7 Статистика.
Плеер предоставляет данные в формате json. В нем хранятся следующие данные:
* Характеристики устройства пользователя. Данные должны быть ввиде массива формата: 
    + разрешение в обычном режиме просмотра,
    + разрешение в полноэкранном режиме,
    + цветовое пространство.
* Действия пользователя с шкалой времени. Данные должны быть ввиде массива формата: 
    + время совершения действия,
    + текущая видеодорожка,
    + текущая аудеодорожка,
    + таймкод,
    + продолжительность фрагмента,
    + состояние проказа (воспроизведение или пауза),
    + открыта ли вкладка.
* Моменты изменения качества видео. Данные должны быть ввиде массива формата:
    + время совершения действия,
    + таймкод,
    + текущая видеодорожка,
    + текущая аудеодорожка,
    + качество видео.
* Состояние воспроизведения. Новая запись в массиве появляется после: изменения качества видео, начала воспроизведения (фрагмент заканчивается после нажатия на паузу), смены видеодорожки, смены аудиодорожки. Данные должны быть ввиде массива формата:
    + время совершения действия,
    + текущая видеодорожка,
    + текущая аудеодорожка,
    + качество видео, 
    + таймкод,
    + продолжительность фрагмента,
    + колличество показанных кадров,
    + колличество потерянных кадров.
* Параметры транслируемого видео. Данные должны быть ввиде массива формата:
    + видеодорожка,
        - продолжительность,
        - разрешение,
        - частота кадров
        - кодек
        - формат
        - битрейт,
    + аудеодорожка,
        - колличество аудиопотоков,
        - битрейт аудиопотоков,
        - частота дискритизации аудиопотоков.

## 2.8 Скачивание видео.
Плеер должен иметь возможность сохранить видео на устройстово пользователя. Если это запрещено, то должна быть DRM.

## 2.9 Управление горячими клавишами.
Плеер должен поддерживать горячие клавиши. Могут быть переопределенны.
* Пауза/Плей - "пробел", "K"
* Перемотать ролик на 10 секунд вперед* - "вправо", "L"
* Перемотать ролик на 10 секунд назад* - "влево", "J"
* Перейти к следующему кадру (когда воспроизведение приостановлено) - ","
* Перейти к следующему кадру (когда воспроизведение приостановлено) - "."
* Уменьшить скорость воспроизведения - "<", "SHIFT+,"
* Увеличить скорость воспроизведения - ">", "SHIFT+."
* Увеличить громкость звука - "вверх"
* Уменьшить громкость звука - "вниз"
* Включить/Выключить звук - "M"
* Включить или отключить субтитры - "c"
* Настроить прозрачность текста - "o"
* Настроить прозрачность окна - "w"
* Увеличить размер шрифта - "+"
* Уменьшить размер шрифта - "-"
* Включить или выключить полноэкранный режим - "f"
* Выйти из полноэкранного режима - "Esc"

\* Перемотка может быть изменена.

# 3 Поддерживаемые параметры видео
Общие поддерживаемые параметры видео.

## 3.1 Разрешения видео
Плеер должен поддерживать видео с разрешением по 8к (8192 пикселя по длинной стороне). Соотношение сторон: 1:1, 4:3, 16:9, 9:16, 18:9, 9:18, 21:9, 9:21. Пиксель квадратный.

## 3.2 Частота кадров видео
Плеер должен поддерживать видео с частотой кадров: 24fps, 25fps, 30fps, 50fps, 60fps.

## 3.3 Кодеки видео
Плеер должен поддерживать кодеки:
* AV1 (aom-av1)
* VP9 (vpx)
* H265 (x264)
* H264 (x265)

Если доступно видео (с одним и тем же разрешением) в нескольких кодеках, то выбор должен быть произведен в соответствии с размером файла и поддержкой его браузером.

## 3.4 Форматы видео
Плеер должен поддерживать форматы:
* Последовательное скачивание (Progressive download)
    + MP4 (MPEG-4 Part 14)
    + WebM
* HLS
* DASH

# 4. Предлагаемый стек технологий
Для реализации системы предлагается следующий стек технологий: js.

# 5. Требования к дизайну
Минималистичный дизайн. Цвет шкалы времени - красный, иконок - белый, задний фон - чёрный-полупрозраный. Субтитры долный отображаться на облати видео. Элементы управлнения могут менять свое положение по необходимости.

## 5.1 Элементы управления 
Внизу экрана расположен шкала времени. С помощью её можно передвигаться по моментам видео, а также отображается загруженная часть.
Под шкалой времени находятся элементы: пауза, выбора громкости звука, скачать, субтитров, настроек, картинка в картинке, полноэкранный режим.
По клику правой кнопокой мыши появляется меню, которое содержит пункты: сделать скриншот, сделать вырезку из видео (сделать клип), язык плеера, показать статистику, горячие клавиши.

## 5.2 Элемент управления "Настройки"
По клику на кнопку "Настройки" внизу плеера появляется список. Обязательные пункты: скорость воспроизведения. Дополнительные: качество, видеодорожки, аудиодорожки, параметры субтитров.